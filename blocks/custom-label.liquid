{{ 'custom-label.css' | asset_url | stylesheet_tag }}

{% liquid
  assign text = block.settings.text
  assign link = block.settings.link
%}

{% if text != blank %}
  {% if link != blank %}
    <a
      href="{{ link }}"
      class="tk-custom-label"
      style="
        --tk-label-text: {{ block.settings.text_color }};
        --tk-label-border: rgba(
          {{ block.settings.border_color.red }},
          {{ block.settings.border_color.green }},
          {{ block.settings.border_color.blue }},
          {{ block.settings.border_opacity | divided_by: 100.0 }}
        );
        --tk-label-bg: rgba(
          {{ block.settings.bg_color.red }},
          {{ block.settings.bg_color.green }},
          {{ block.settings.bg_color.blue }},
          {{ block.settings.bg_opacity | divided_by: 100.0 }}
        );
        --tk-label-bg-hover: rgba(
          {{ block.settings.hover_bg_color.red }},
          {{ block.settings.hover_bg_color.green }},
          {{ block.settings.hover_bg_color.blue }},
          {{ block.settings.hover_bg_opacity | divided_by: 100.0 }}
        );
      "
      {{ block.shopify_attributes }}
    >
      {{ text }}
    </a>
  {% else %}
    <span
      class="tk-custom-label"
      style="
        --tk-label-text: {{ block.settings.text_color }};
        --tk-label-border: rgba(
          {{ block.settings.border_color.red }},
          {{ block.settings.border_color.green }},
          {{ block.settings.border_color.blue }},
          {{ block.settings.border_opacity | divided_by: 100.0 }}
        );
        --tk-label-bg: rgba(
          {{ block.settings.bg_color.red }},
          {{ block.settings.bg_color.green }},
          {{ block.settings.bg_color.blue }},
          {{ block.settings.bg_opacity | divided_by: 100.0 }}
        );
        --tk-label-bg-hover: rgba(
          {{ block.settings.hover_bg_color.red }},
          {{ block.settings.hover_bg_color.green }},
          {{ block.settings.hover_bg_color.blue }},
          {{ block.settings.hover_bg_opacity | divided_by: 100.0 }}
        );
      "
      {{ block.shopify_attributes }}
    >
      {{ text }}
    </span>
  {% endif %}
{% endif %}

{% schema %}
{
  "name": "Custom label",
  "settings": [
    {
      "type": "text",
      "id": "text",
      "label": "Text",
      "default": "Label"
    },
    {
      "type": "url",
      "id": "link",
      "label": "Link"
    },

    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#000000"
    },

    {
      "type": "color",
      "id": "bg_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "bg_opacity",
      "label": "Background opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default": 100
    },

    {
      "type": "color",
      "id": "hover_bg_color",
      "label": "Hover background color",
      "default": "#f2f2f2"
    },
    {
      "type": "range",
      "id": "hover_bg_opacity",
      "label": "Hover background opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default": 100
    },

    {
      "type": "color",
      "id": "border_color",
      "label": "Border color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "border_opacity",
      "label": "Border opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default": 100
    }
  ],
  "presets": [
    {
      "name": "Custom label"
    }
  ]
}
{% endschema %}
